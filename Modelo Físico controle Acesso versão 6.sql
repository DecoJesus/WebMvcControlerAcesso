


--USE master

--EXCLUIR O BANCO DE DADOS
  

CREATE DATABASE DB_CONTROLEACESSO

USE DB_CONTROLEACESSO



CREATE TABLE TB_CARGO (
COD_CARGO INTEGER,
CARGO VARCHAR(60)NOT NULL,
CONSTRAINT PK_CARGO PRIMARY KEY (COD_CARGO)
)

select * from  tb_cargo

INSERT INTO TB_CARGO (COD_CARGO,CARGO) VALUES (1, 'Professor')
INSERT INTO TB_CARGO VALUES (2, 'Secretario(a)')
INSERT INTO TB_CARGO VALUES (3, 'Diretor')
INSERT INTO TB_CARGO VALUES (4, 'Cordenador')

CREATE TABLE TB_USUARIO (
COD_USUARIO INTEGER,
NOME VARCHAR(70)NOT NULL,
SOBRENOME VARCHAR(60)NOT NULL,
EMAIL VARCHAR(60)NOT NULL,
SENHA VARCHAR(10)NOT NULL,
COD_CARGO INTEGER,
CONSTRAINT PK_USUARIO PRIMARY KEY (COD_USUARIO),
CONSTRAINT FK_CARGO FOREIGN KEY(COD_CARGO) REFERENCES TB_CARGO (COD_CARGO)
)

SELECT * FROM TB_USUARIO


INSERT INTO TB_USUARIO(COD_USUARIO,NOME,SOBRENOME, EMAIL, SENHA,COD_CARGO)
VALUES (1,'Admin','Adimin' ,'admin@admin.com', '123456','1' )
  
INSERT INTO TB_USUARIO(COD_USUARIO,NOME,SOBRENOME, EMAIL, SENHA,COD_CARGO)
VALUES (2,'User', 'User','user@user.com', '123456','2')



CREATE TABLE TB_ALUNO (
COD_ALUNO INTEGER,
NOME VARCHAR(70)NOT NULL,
RM VARCHAR(10)NOT NULL,
DATA_NASCIENTO DATE NOT NULL,
SEXO CHAR(10) NOT NULL,
CONSTRAINT PK_ALUNO PRIMARY KEY (COD_ALUNO)
)
--EXCLUIR A TABELA ALUNO
--DROP TABLE TB_ALUNO

select * from TB_ALUNO
--INSERINDO DADOS NA TABELA Aluno USANDO O (INSERT DECLARATIVO)
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(1,'Fulano de Tal','2121','10-10-2008','M')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(2,'BELTRANO','2323','12-02-2000', 'M')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(3,'SICLANO','3333', '13-03-2010','M')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(4,'Galder Urrutia','45678','12-03-2000','M')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(5,'Zorion Eguileor','23456','12-02-1960', 'M')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(6,'Baharat','45670', '13-03-1980','M')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(7,'Arya Uchôa','23576','30-12-2000','F')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(8,'Jon Snow','23789','12-11-2000', 'M')
INSERT INTO TB_ALUNO(COD_ALUNO,NOME,RM,DATA_NASCIENTO,SEXO) VALUES(9,'Stannis Kimber','57809', '24-08-1990','M')
--INSERINDO DADOS NA TABELA Aluno USANDO O (INSERT POSICIONAL)
INSERT INTO TB_ALUNO VALUES(10,'Sansa Simbar','34567','25-09-1999', 'F')
INSERT INTO TB_ALUNO VALUES(11,'Ramsey Klaver','35890', '13-03-1989','M')
INSERT INTO TB_ALUNO VALUES(12,'Brian Gilvan','23939','12-05-2000', 'M')
INSERT INTO TB_ALUNO VALUES(13,'Henry Winkler','43120', '26-10-2001','M')
INSERT INTO TB_ALUNO VALUES(14,'Patty Pimentinha','34567','12-02-2001', 'F')
INSERT INTO TB_ALUNO VALUES(15,'Miles Prower','32119', '13-03-2002','F')
INSERT INTO TB_ALUNO VALUES(16,'Jeff Albertson','34007','25-09-1970', 'M')
INSERT INTO TB_ALUNO VALUES(17,'Edward Baer','38751', '13-03-1989','M')
INSERT INTO TB_ALUNO VALUES(18,'Ketty White','21390','12-05-1972', 'F')
INSERT INTO TB_ALUNO VALUES(19,'Katiuça Pedrita','57002', '26-12-2001','F')
INSERT INTO TB_ALUNO VALUES(20,'Amado Amoroso','34336','12-02-1980', 'M')
INSERT INTO TB_ALUNO VALUES(21,'Aeronauta Barata','39909', '13-03-1975','F')
INSERT INTO TB_ALUNO VALUES(22,'Molly Lima', '56780', '29-01-1990','F')
INSERT INTO TB_ALUNO VALUES(23,'Johanna Griffin','50967', '26-12-1988','F')
INSERT INTO TB_ALUNO VALUES(24,'Heidi Silva','90879','12-02-2000', 'F')
INSERT INTO TB_ALUNO VALUES(25,'Corinne Price','45678', '13-03-1989','F')
INSERT INTO TB_ALUNO VALUES(26,'Hannah Jesus', '78909', '24-07-2003','F')


--CLAUSA WHERE PRA CONSULTAR SOMENTE POR NOME FULANO DE TAL
--SELECT * FROM TB_ALUNO
--WHERE NOME = 'FULANO DE TAL'


--EXCLUIR A CATEGORIA QUE É FULANO DE TAL
--DELETE FROM TB_ALUNO
--WHERE NOME = 'FULANO DE TAL'



CREATE TABLE TB_ACESSO (
COD_ACESSO INTEGER,
DATA VARCHAR(10)NOT NULL,
HORA_ENTRADA TIME NOT NULL,
HORA_SAIDA TIME NOT NULL,
COD_ALUNO INTEGER,
CONSTRAINT PK_ACESSO PRIMARY KEY (COD_ACESSO),
CONSTRAINT FK_ALUNO FOREIGN KEY (COD_ALUNO) REFERENCES TB_ALUNO (COD_ALUNO)
)
--EXCLUIR A TABELA ACESSO
--DROP TABLE TB_ACESSO

select * from tb_acesso

INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(1,'26/08/2019','19:10','22:50','01' )
INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(2,'26/08/2019','19:10','22:50','02' )
INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(3,'26/08/2019','19:10','22:50','03' )
INSERT INTO TB_ACESSO VALUES(4,'26/08/2019','19:10','22:50','04' )
INSERT INTO TB_ACESSO VALUES(5,'26/08/2019','19:10','22:50','05' )
INSERT INTO TB_ACESSO VALUES(6,'26/08/2019','19:10','22:50','06' )
INSERT INTO TB_ACESSO VALUES(7,'26/08/2019','19:10','22:50','07' )
INSERT INTO TB_ACESSO VALUES(8,'26/08/2019','19:10','22:50','08' )
INSERT INTO TB_ACESSO VALUES(9,'26/08/2019','19:10','22:50','09' )
INSERT INTO TB_ACESSO VALUES(10,'26/08/2019','19:10','22:50','10' )
INSERT INTO TB_ACESSO VALUES(11,'26/08/2019','19:10','22:50','11' )
INSERT INTO TB_ACESSO VALUES(12,'26/08/2019','19:10','22:50','12' )
INSERT INTO TB_ACESSO VALUES(13,'26/08/2019','19:10','22:50','13' )
INSERT INTO TB_ACESSO VALUES(14,'26/08/2019','19:10','22:50','14' )
INSERT INTO TB_ACESSO VALUES(15,'26/08/2019','19:10','22:50','15' )
INSERT INTO TB_ACESSO VALUES(16,'26/08/2019','19:10','22:50','16' )
INSERT INTO TB_ACESSO VALUES(17,'26/08/2019','19:10','22:50','17' )
INSERT INTO TB_ACESSO VALUES(18,'26/08/2019','19:10','22:50','18' )
INSERT INTO TB_ACESSO VALUES(19,'26/08/2019','19:10','22:50','19' )
INSERT INTO TB_ACESSO VALUES(20,'26/08/2019','19:10','22:50','20' )
INSERT INTO TB_ACESSO VALUES(21,'26/08/2019','19:10','22:50','21' )
INSERT INTO TB_ACESSO VALUES(22,'26/08/2019','19:10','22:50','22' )




INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(23,'27/08/2019','19:10','22:50','01' )
INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(24,'27/08/2019','19:10','22:50','02' )
INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(25,'27/08/2019','19:10','22:50','03' )
INSERT INTO TB_ACESSO VALUES(26,'28/08/2019','19:10','22:50','04' )
INSERT INTO TB_ACESSO VALUES(27,'28/08/2019','19:10','22:50','05' )
INSERT INTO TB_ACESSO VALUES(28,'28/08/2019','19:10','22:50','06' )
INSERT INTO TB_ACESSO VALUES(29,'28/08/2019','19:10','22:50','07' )
INSERT INTO TB_ACESSO VALUES(30,'27/08/2019','19:10','22:50','08' )
INSERT INTO TB_ACESSO VALUES(31,'27/08/2019','19:10','22:50','09' )
INSERT INTO TB_ACESSO VALUES(32,'27/08/2019','19:10','22:50','10' )
INSERT INTO TB_ACESSO VALUES(33,'27/08/2019','19:10','22:50','11' )
INSERT INTO TB_ACESSO VALUES(34,'27/08/2019','19:10','22:50','12' )
INSERT INTO TB_ACESSO VALUES(35,'27/08/2019','19:10','22:50','13' )
INSERT INTO TB_ACESSO VALUES(36,'27/08/2019','19:10','22:50','14' )
INSERT INTO TB_ACESSO VALUES(37,'27/08/2019','19:10','22:50','15' )
INSERT INTO TB_ACESSO VALUES(38,'27/08/2019','19:10','22:50','16' )
INSERT INTO TB_ACESSO VALUES(39,'27/08/2019','19:10','22:50','17' )
INSERT INTO TB_ACESSO VALUES(40,'27/08/2019','19:10','22:50','18' )
INSERT INTO TB_ACESSO VALUES(41,'27/08/2019','19:10','22:50','19' )
INSERT INTO TB_ACESSO VALUES(42,'27/08/2019','19:10','22:50','20' )
INSERT INTO TB_ACESSO VALUES(43,'27/08/2019','19:10','22:50','21' )
INSERT INTO TB_ACESSO VALUES(44,'27/08/2019','19:10','22:50','22' )


INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(45,'29/08/2019','19:10','22:50','01' )
INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(46,'29/08/2019','19:10','22:50','02' )
INSERT INTO TB_ACESSO (COD_ACESSO,DATA,HORA_ENTRADA,HORA_SAIDA,COD_ALUNO) VALUES(47,'29/08/2019','19:10','22:50','03' )
INSERT INTO TB_ACESSO VALUES(48,'30/08/2019','19:10','22:50','04' )
INSERT INTO TB_ACESSO VALUES(49,'29/08/2019','19:10','22:50','05' )
INSERT INTO TB_ACESSO VALUES(50,'29/08/2019','19:10','22:50','06' )
INSERT INTO TB_ACESSO VALUES(51,'30/08/2019','19:10','22:50','07' )
INSERT INTO TB_ACESSO VALUES(52,'29/08/2019','19:10','22:50','08' )
INSERT INTO TB_ACESSO VALUES(53,'30/08/2019','19:10','22:50','09' )
INSERT INTO TB_ACESSO VALUES(54,'29/08/2019','19:10','22:50','10' )
INSERT INTO TB_ACESSO VALUES(55,'29/08/2019','19:10','22:50','11' )
INSERT INTO TB_ACESSO VALUES(56,'30/08/2019','19:10','22:50','12' )
INSERT INTO TB_ACESSO VALUES(57,'29/08/2019','19:10','22:50','13' )
INSERT INTO TB_ACESSO VALUES(58,'29/08/2019','19:10','22:50','14' )
INSERT INTO TB_ACESSO VALUES(59,'30/08/2019','19:10','22:50','15' )
INSERT INTO TB_ACESSO VALUES(60,'31/08/2019','19:10','22:50','16' )
INSERT INTO TB_ACESSO VALUES(61,'31/08/2019','19:10','22:50','17' )
INSERT INTO TB_ACESSO VALUES(62,'29/08/2019','19:10','22:50','18' )
INSERT INTO TB_ACESSO VALUES(63,'02/09/2019','19:10','22:50','19' )
INSERT INTO TB_ACESSO VALUES(64,'29/08/2019','19:10','22:50','20' )
INSERT INTO TB_ACESSO VALUES(65,'29/08/2019','19:10','22:50','21' )
INSERT INTO TB_ACESSO VALUES(66,'01/09/2019','19:10','22:50','22' )






--EXCLUIR A CATEGORIA CUJO CODIGO FOR '1'
--DELETE FROM TB_ACESSO
--WHERE COD_ACESSO = 1

--EXCLUIR A CATEGORIA CUJO CODIGO FOR '2'
--DELETE FROM TB_ACESSO
--WHERE COD_ACESSO = 2


CREATE TABLE TB_AUTORIZACAO (
COD_AUTORIZACAO INTEGER,
NOME_RESPONSAVEL VARCHAR(70)NOT NULL,
RG CHAR(12)NOT NULL,
DATA DATE NOT NULL,
HORA TIME NOT NULL ,
TIPO_AUTORIZACAO VARCHAR(20) NULL,
VIGENCIA_INICIO VARCHAR(50)NOT NULL,
VIGENCIA_FIM VARCHAR(10)NOT NULL,
MOTIVO VARCHAR(100) NOT NULL,
COD_ALUNO INTEGER,
CONSTRAINT PK_AUTORIZACAO PRIMARY KEY (COD_AUTORIZACAO),
CONSTRAINT FK_ALUNO2 FOREIGN KEY (COD_ALUNO) REFERENCES TB_ALUNO (COD_ALUNO)
)
--EXCLUIR A TABELA AUTORIZACAO
--DROP TABLE TB_AUTORIZACAO
SELECT * FROM TB_AUTORIZACAO

INSERT INTO TB_AUTORIZACAO(COD_AUTORIZACAO,NOME_RESPONSAVEL,RG,DATA,HORA,TIPO_AUTORIZACAO,VIGENCIA_INICIO,VIGENCIA_FIM,MOTIVO,COD_ALUNO)
values (1,'Francisquinha','111000111','10-03-2020','20:30','Pessoal','10-03-2020','10-04-2020','Precisa sair mais cedo','1')

INSERT INTO TB_AUTORIZACAO values (2,'Filomena arantes','112223334','15-04-2020','17:00','Pessoal','20-03-2020','31-03-2020','Preciso Entra mais cedo','2')
INSERT INTO TB_AUTORIZACAO values (3,'Amelia Ava','000000000','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','1')
INSERT INTO TB_AUTORIZACAO values (4,'Martina Nobre','111111111','20-03-2020','17:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','2')
INSERT INTO TB_AUTORIZACAO values (5,'Giorgia Santos','222222222','20-03-2020','17:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','3')
INSERT INTO TB_AUTORIZACAO values (6,'Emma Tavares','333333333','20-03-2020','17:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','4')

INSERT INTO TB_AUTORIZACAO values (7,'Charlotte Souza','444444444','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','5')
INSERT INTO TB_AUTORIZACAO values (8,'Chloe da Silva','555555555','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','6')
INSERT INTO TB_AUTORIZACAO values (9,'Isla de Jesus','666666666','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','7')
INSERT INTO TB_AUTORIZACAO values (10,'Lily de Coimbra','777777777','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','8')
INSERT INTO TB_AUTORIZACAO values (11,'Alessia Alves','888888888','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','9')
INSERT INTO TB_AUTORIZACAO values (12,'Isaac de Farias','999999999','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','10')
INSERT INTO TB_AUTORIZACAO values (13,'Giorge Santos','010101010','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','11')
INSERT INTO TB_AUTORIZACAO values (14,'Tavares Oliveira','020202020','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','12')
INSERT INTO TB_AUTORIZACAO values (15,'Benício Jesus','030303030','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','13')
INSERT INTO TB_AUTORIZACAO values (16,'Theodoro Alves','040404040','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','14')
INSERT INTO TB_AUTORIZACAO values (17,'Ícaro de Souza','050505050','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','15')
INSERT INTO TB_AUTORIZACAO values (18,'Nicolas Cho','060606060','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','16')
INSERT INTO TB_AUTORIZACAO values (19,'Kim Young','070707070','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','17')
INSERT INTO TB_AUTORIZACAO values (20,'Gael Kivo','080808080','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','18')
INSERT INTO TB_AUTORIZACAO values (21,'Pietro Sá','090909090','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','19')
INSERT INTO TB_AUTORIZACAO values (22,'Emma Salvador','101010101','20-03-2020','07:00','Gearl','23-03-2020','30-04-2020','Por causa do Coronavírus','20')
--Atualizando campo cod_aluno na tabela autorização de null para 2
--UPDATE TB_AUTORIZACAO SET COD_ALUNO = '2'
--WHERE COD_AUTORIZACAO =2;


CREATE TABLE TB_CURSO (
COD_CURSO INTEGER,
NOME_CURSO VARCHAR(70)NOT NULL,
CONSTRAINT PK_CURSO PRIMARY KEY (COD_CURSO)
)

select * from TB_CURSO

--INSERINDO DADOS NA TABELA CURSO USANDO O (INSERT DECLARATIVO)
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (1,'Informática')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (2,'Eletroeletrônica')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (3,'Médicina')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (4,'Engenharia')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (5,'Administração')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (6,'Análises Clínicas')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (7,'Contabilidade')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (8,'Design de Interiores')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (9,'Edificações')
INSERT INTO TB_CURSO (COD_CURSO, NOME_CURSO) VALUES (10,'Enfermagem')
--INSERINDO DADOS NA TABELA CURSO USANDO O (INSERT POSICIONAL)
INSERT INTO TB_CURSO  VALUES (11,'Farmácia')
INSERT INTO TB_CURSO  VALUES (12,'Finanças')
INSERT INTO TB_CURSO  VALUES (13,'Hospedagem')
INSERT INTO TB_CURSO  VALUES (14,'Informática (com robótica e automação)')
INSERT INTO TB_CURSO  VALUES (15,'Informática para Internet (Web design)')
INSERT INTO TB_CURSO  VALUES (16,'Logística')
INSERT INTO TB_CURSO  VALUES (17,'Manitenção e Suporte em Informatica (Com robótica e automação)')
INSERT INTO TB_CURSO  VALUES (18,'Publicidade')
INSERT INTO TB_CURSO  VALUES (19,'Química')
INSERT INTO TB_CURSO  VALUES (20,'Recursos Humanos')
INSERT INTO TB_CURSO  VALUES (21,'Redes de Computadores')
INSERT INTO TB_CURSO  VALUES (22,'Secretariado')
INSERT INTO TB_CURSO  VALUES (23,'Serviços Jurídicos')
INSERT INTO TB_CURSO  VALUES (24,'Telecomunicações')

--Atualizar o Nome do Curso de (Médicina) para (Segurança de Trabalho)
update TB_CURSO set NOME_CURSO = 'Segurança do Trabalho' where COD_CURSO = 3;

--Atualizar o Nome do Curso de (Engenharia) para (Cursinho Pré-Vestibular)
update TB_CURSO set NOME_CURSO = 'Cursinho Pré-vestibular' where COD_CURSO = 4;


--USANDO O UPDATE SEM A CLAUSA WHERE TODOS OS DADOS DA COLUNA  SERÃO   

--Atualizando dados de uma tabela com dados de outra tabela
--update TB_CURSO set NOME_CURSO = ( select NOME_RESPONSAVEL from TB_AUTORIZACAO where COD_AUTORIZACAO = 1)

--Atualizando os dados da tabela curso
--update TB_CURSO set NOME_CURSO = 'Psicologia' where COD_CURSO = 4;
--update TB_CURSO set NOME_CURSO = 'Informática' where COD_CURSO = 1;
--update TB_CURSO set NOME_CURSO = 'Médicina' where COD_CURSO = 3;
--update TB_CURSO set NOME_CURSO = 'Eletroeletrônica' where COD_CURSO = 2;



CREATE TABLE TB_TURMA (
COD_TURMA INTEGER,
SERIE VARCHAR(10)NOT NULL,
PERIODO VARCHAR(10)NOT NULL,
HORA_ENTRADA TIME NOT NULL,
HORA_SAIDA TIME NOT NULL,
COD_CURSO INTEGER,
CONSTRAINT PK_TURMA PRIMARY KEY (COD_TURMA),
CONSTRAINT FK_CURSO FOREIGN KEY (COD_CURSO) REFERENCES TB_CURSO (COD_CURSO)
)

select * from TB_TURMA

--INSERINDO DADOS NA TABELA TURMA USANDO O (INSERT DECLARATIVO)
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (1,'1','Noite','19:00','22:45', '1')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (2,'1','Noite','19:00','22:45', '2')
--INSERINDO DADOS NA TABELA TURMA USANDO O (INSERT POSICINAL)
INSERT INTO TB_TURMA VALUES (3,'1','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (4,'1','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (5,'1','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (6,'1','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (7,'1','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (8,'1','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (9,'1','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (10,'1','Noite','19:00','22:45','1')


INSERT INTO TB_TURMA VALUES (11,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (12,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (13,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (14,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (15,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (16,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (17,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (18,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (19,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (20,'1','Noite','19:00','22:45','15')
INSERT INTO TB_TURMA VALUES (21,'1','Noite','19:00','22:45','15')


INSERT INTO TB_TURMA VALUES (22,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (23,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (24,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (25,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (26,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (27,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (28,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (29,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (30,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (31,'1','Noite','19:00','22:45','21')
INSERT INTO TB_TURMA VALUES (32,'1','Noite','19:00','22:45','21')


INSERT INTO TB_TURMA VALUES (33,'1','Noite','19:00','22:45','20')
INSERT INTO TB_TURMA VALUES (34,'1','Noite','19:00','22:45','20')
INSERT INTO TB_TURMA VALUES (35,'1','Noite','19:00','22:45','20')
INSERT INTO TB_TURMA VALUES (36,'1','Noite','19:00','22:45','20')
INSERT INTO TB_TURMA VALUES (37,'1','Noite','19:00','22:45','20')
INSERT INTO TB_TURMA VALUES (38,'1','Noite','19:00','22:45','16')
INSERT INTO TB_TURMA VALUES (39,'1','Noite','19:00','22:45','16')
INSERT INTO TB_TURMA VALUES (40,'1','Noite','19:00','22:45','16')
INSERT INTO TB_TURMA VALUES (41,'1','Noite','19:00','22:45','16')
INSERT INTO TB_TURMA VALUES (42,'1','Noite','19:00','22:45','16')
INSERT INTO TB_TURMA VALUES (43,'1','Noite','19:00','22:45','16')


INSERT INTO TB_TURMA VALUES (44,'2','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (45,'2','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (46,'2','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (47,'2','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (48,'2','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (49,'2','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (50,'2','Noite','19:00','22:45','1')
INSERT INTO TB_TURMA VALUES (51,'2','Noite','19:00','22:45','1')

--INSERINDO DADOS NA TABELA TURMA USANDO O (INSERT DECLARATIVO)
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (52,'1','Noite','19:00','22:45', '4')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (53,'1','Noite','19:00','22:45', '4')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (54,'1','Noite','19:00','22:45', '4')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (55,'1','Noite','19:00','22:45', '4')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (56,'1','Noite','19:00','22:45', '14')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (57,'1','Noite','19:00','22:45', '14')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (58,'1','Noite','19:00','22:45', '14')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (59,'1','Noite','19:00','22:45', '14')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (60,'1','Noite','19:00','22:45', '10')
INSERT INTO TB_TURMA (COD_TURMA,SERIE,PERIODO,HORA_ENTRADA,HORA_SAIDA,COD_CURSO) VALUES (61,'1','Noite','19:00','22:45', '10')




--CRIANDO UMA REGRA (CONSTRAINT) OU SEJA ADICIONANDO A CHAVE PRIMARIA DA TABELA CURSO COMO CHAVE ESTRANGEIRA NA TABELA TURMA
--CONSTRAINT FK_CURSO FOREIGN KEY(COD_CURSO) REFERENCES TB_CURSO(COD_CURSO)




CREATE TABLE TB_ALUNO_TURMA (
COD_ALUNO INTEGER,
COD_TURMA INTEGER,
ANO CHAR(4),
SEMESTRE CHAR(10),
CONSTRAINT PK_ALUNO_TURMA PRIMARY KEY(COD_ALUNO,COD_TURMA,ANO,SEMESTRE),
CONSTRAINT FK_ALUNO3 FOREIGN KEY(COD_ALUNO) REFERENCES TB_ALUNO (COD_ALUNO),
CONSTRAINT FK_TURMA FOREIGN KEY(COD_TURMA) REFERENCES TB_TURMA (COD_TURMA)
)

SELECT * FROM TB_ALUNO_TURMA

INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (1, '1','2020','Segundo')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (2, '1','2020','Segundo')

INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (3, '1','2020','Segundo')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (4, '1','2020','Segundo')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (5, '1','2020','Segundo')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (6, '2','2020','Segundo')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (7, '2','2020','Primeiro')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (8, '2','2020','Primeiro')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (9, '2','2020','Segundo')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (10, '2','2020','Segundo')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (11, '1','2020','Primeiro')
INSERT INTO TB_ALUNO_TURMA (COD_ALUNO, COD_TURMA, ANO, SEMESTRE) VALUES (12, '1','2020','Primeiro')









--ADICIONANDO CHAVES ESTRANGEIRA A UMA TABELA

--ALTER TABLE TB_ACESSO ADD FOREIGN KEY(COD_ALUNO) REFERENCES TB_ALUNO (COD_ALUNO)
--ALTER TABLE TB_AUTORIZACAO ADD FOREIGN KEY(COD_ALUNO) REFERENCES TB_ALUNO (COD_ALUNO)
--ALTER TABLE TB_TURMA ADD FOREIGN KEY(COD_CURSO) REFERENCES TB_CURSO (COD_CURSO)
--Adicionando um campo (Cod_adm_usuario) na tabela aluno
--alter table TB_ALUNO
--add COD_ADM_USUARIO int;

--EXCLUINDO O CAMPO (COD_ADM_USUARIO) NA TABELA ALUNO
--ALTER TABLE TB_ALUNO
--DROP COLUMN COD_ADM_USUARIO;

--adicionando chave estrangeira (fk_Adm_usuario)na tabela aluno
--ALTER TABLE TB_ALUNO
--ADD CONSTRAINT FK_ADM_USUARIO FOREIGN KEY (COD_ADM_USUARIO)REFERENCES TB_ADM_USUARIO (COD_ADM_USUARIO)


--Removendo a chave estrangeira (FK_Aluno) da tabela tb_adm_usuario

--alter table tb_adm_usuario
--drop constraint fk_admaluno;

--CONSULTAR TODAS AS COLUNAS E REGITROS(LINHAS) DA TABELA TB_ADM_USUARIO
 select * from TB_USUARIO
 select * from TB_AUTORIZACAO
  select * from TB_ALUNO
  select*from TB_CURSO
  select * from tb_turma
  SELect * from TB_ALUNO_TURMA
  select * from TB_ACESSO

  --ADICIONAR O CAMPO PRECO NA TABELA LIVRO
--ALTER TABLE TB_LIVRO ADD PRECO DECIMAL(5,2)

-- EXCLUI O CAMPO PRECO DA TABELA LIVRO
--ALTER TABLE TB_LIVRO DROP COLUMN PRECO

--ADICIONAR OS CAMPOS PRECO E QUANTIDADE DE PÁGINAS NA TABELA LIVRO
--ALTER TABLE TB_LIVRO ADD PRECO DECIMAL (5,2),QUANTIDADE_PAGINAS DECIMAL(5)


--RENOMEIA OU (ALTERA) O NOME DO CAMPO PRECO PARA VALOR DA TABELA LIVRO
--SP_RENAME 'TB_LIVRO.PRECO','VALOR','COLUMN'

--ALTERAR UMA COLUNA JÁ EXISTENTE
--ALTER TABLE TB_LIVRO ALTER COLUMN VALOR DECIMAL(6,2)


--ALTERAR O NOME DA TABELA 'TB_LIVRO' PARA 'TB_PRODUTO'
--SP_RENAME 'TB_LIVRO', 'TB_PRODUTO'



--ALTERAR O NOME DA TABELA 'TB_PRODUTO' PARA 'TB_LIVRO'
--SP_RENAME 'TB_PRODUTO', 'TB_LIVRO'

--RENOMEAR OU (ALTERAR) O NOME DO CAMPO 'VALOR' PARA 'PRECO'
--SP_RENAME 'TB_LIVRO.VALOR', 'PRECO', 'COLUMN'



 --Removendo o campo (COD_ALUNO) da tabela tb_adm_usuario

 --alter table tb_adm_usuario
 --drop column cod_aluno;

 --Consultar o Nome dos alunos ano a serie e o nome do curso que ele esta fazendo
 select TB_ALUNO.NOME,TB_ALUNO_TURMA.ANO,TB_TURMA.SERIE,TB_CURSO.NOME_CURSO 
from TB_ALUNO inner join TB_ALUNO_TURMA
on TB_ALUNO.COD_ALUNO = TB_ALUNO_TURMA.COD_ALUNO
inner join TB_TURMA on TB_TURMA.COD_TURMA = TB_ALUNO_TURMA.COD_TURMA
inner join TB_CURSO on TB_CURSO.COD_CURSO = TB_TURMA.COD_CURSO


select TB_ALUNO.NOME,TB_ALUNO_TURMA.ANO,TB_TURMA.SERIE,TB_CURSO.NOME_CURSO 
from TB_ALUNO inner join TB_ALUNO_TURMA
on TB_ALUNO.COD_ALUNO = TB_ALUNO_TURMA.COD_ALUNO
inner join TB_TURMA on TB_TURMA.COD_TURMA = TB_ALUNO_TURMA.COD_TURMA
inner join TB_CURSO on TB_CURSO.COD_CURSO = TB_TURMA.COD_CURSO
 where Nome_CURSO = 'Informática'

--Consultar  os Nome dos  Alunos Nomes do Responsável o Motivo e o tipo da Autorização e o Codigo do Aluno autorizado, Codigo do Acesso 
select TB_ALUNO.NOME,TB_AUTORIZACAO.NOME_RESPONSAVEL,TB_AUTORIZACAO.MOTIVO,TB_AUTORIZACAO.TIPO_AUTORIZACAO,TB_AUTORIZACAO.COD_ALUNO,TB_ACESSO.COD_ACESSO 
from TB_ALUNO inner join TB_AUTORIZACAO
on TB_ALUNO.COD_ALUNO = TB_AUTORIZACAO.COD_ALUNO
inner join TB_ACESSO on TB_ACESSO.COD_ACESSO = TB_AUTORIZACAO.COD_ALUNO

--Consultar os Nome dos  Alunos e o Nomes do Responsável o Motivo e o tipo da Autorização e o Codigo do Aluno autorizado, Codigo do Acesso 
--Cujo Tipo de autorização seja Pessoal
select TB_ALUNO.NOME,TB_AUTORIZACAO.NOME_RESPONSAVEL,TB_AUTORIZACAO.MOTIVO,TB_AUTORIZACAO.TIPO_AUTORIZACAO,TB_AUTORIZACAO.COD_ALUNO,TB_ACESSO.COD_ACESSO 
from TB_ALUNO inner join TB_AUTORIZACAO
on TB_ALUNO.COD_ALUNO = TB_AUTORIZACAO.COD_ALUNO
inner join TB_ACESSO on TB_ACESSO.COD_ACESSO = TB_AUTORIZACAO.COD_ALUNO
where TIPO_AUTORIZACAO  = 'Pessoal'
order by  Nome


--Consultar O Nome do cargo e o Nome do Usuario que o Cadastrou
select TB_CARGO.CARGO,TB_USUARIO.NOME
from TB_CARGO Inner join TB_USUARIO
on TB_CARGO.COD_CARGO = TB_USUARIO.COD_CARGO

--Consultar o nome de Todos os Alunos o ano que estuda a serie que está fazendo e o nome do curso
select TB_ALUNO.NOME,TB_ALUNO_TURMA.ANO,TB_TURMA.SERIE,TB_CURSO.NOME_CURSO
from TB_ALUNO Inner join TB_ALUNO_TURMA
on TB_ALUNO.COD_ALUNO = TB_ALUNO_TURMA.COD_ALUNO
inner join TB_TURMA 
on TB_TURMA.COD_TURMA = TB_ALUNO_TURMA.COD_TURMA
inner join TB_CURSO
on TB_CURSO.COD_CURSO = TB_TURMA.COD_CURSO
order by Nome 

--Consultar o nome de Todos os Alunos o ano que estuda a serie que está fazendo e o nome do curso
--Mas somente de Alunos que nasceram do ano 2000 pra cá 
select TB_ALUNO.NOME,TB_ALUNO_TURMA.ANO,TB_TURMA.SERIE,TB_CURSO.NOME_CURSO
from TB_ALUNO Inner join TB_ALUNO_TURMA
on TB_ALUNO.COD_ALUNO = TB_ALUNO_TURMA.COD_ALUNO
inner join TB_TURMA 
on TB_TURMA.COD_TURMA = TB_ALUNO_TURMA.COD_TURMA
inner join TB_CURSO
on TB_CURSO.COD_CURSO = TB_TURMA.COD_CURSO
where DATA_NASCIENTO >='2000' 

  
  
 --Consultar o nome do aluno e em qual semestre ele esta
 select TB_ALUNO.NOME, TB_ALUNO_TURMA.SEMESTRE 
 from TB_ALUNO inner join TB_ALUNO_TURMA  
 ON TB_ALUNO.COD_ALUNO = TB_ALUNO_TURMA.COD_ALUNO
 
 --Consultar o nome do aluno e em qual semestre ele esta , mas somente da queles que estiver no Primeiro Semestre
 select TB_ALUNO.NOME, TB_ALUNO_TURMA.SEMESTRE 
 from TB_ALUNO inner join TB_ALUNO_TURMA  
 ON TB_ALUNO.COD_ALUNO = TB_ALUNO_TURMA.COD_ALUNO
 where SEMESTRE = 'Primeiro'

 --CONSULTAR OS ALUNOS QUE ESTA AUTORIZADO  E O MOTIVO
 SELECT TB_ALUNO.NOME, TB_AUTORIZACAO.MOTIVO
 FROM TB_ALUNO INNER JOIN TB_AUTORIZACAO
 ON TB_ALUNO.COD_ALUNO = TB_AUTORIZACAO.COD_AUTORIZACAO

  

 --OU

  SELECT TB_ALUNO.NOME, TB_AUTORIZACAO.MOTIVO
 FROM TB_ALUNO ,TB_AUTORIZACAO
 WHERE TB_ALUNO.COD_ALUNO = TB_AUTORIZACAO.COD_ALUNO

 


--CONSULTAR  TODAS OS DADOS (LINHAS) 
--MAS SOMENTE A COLUNA DESCRICAO DA CATEGORIA
--DE COD_CATEGORIA MAIOR (=3) IGUAL A 3
--CLAUSA WHERE PRA CONSULTAR SOMENTE OS CODIGOS FOR IGUAL A 3
SELECT DESCRICAO FROM CATEGORIA
WHERE COD_CATEGORIA = 3



--CONSULTAR  TODAS OS DADOS (LINHAS) 
--MAS SOMENTE A COLUNA DESCRICAO DA CATEGORIA
--DE COD_CATEGORIA MAIOR (>=3) IGUAL A 3
--CLAUSA WHERE PRA CONSULTAR SOMENTE OS CODIGOS FOR MAOIR QUE 3
SELECT DESCRICAO FROM CATEGORIA
WHERE COD_CATEGORIA >3



--CLAUSA WHERE PRA CONSULTAR SOMENTE POR NOME INFORMÁTICA
SELECT * FROM CATEGORIA
WHERE DESCRICAO = 'INFORMÁTICA'




--EXCLUI A CATEGORIA QUE É FICÇÃO CINTIFICA
DELETE FROM CATEGORIA
WHERE DESCRICAO = 'FICÇÃO CIENTIFICA'



--5) A funcionária Debora Kaynara Patricio da Silva casou e mudou seu nome de solteira para o nome de casada ficando, 
--Debora Kaynara Patricio da Silva Santos. Atualize o nome desta funcionária.

UPDATE FUNCIONARIO SET NOME_FUNC = 'Debora Kaynara Patricio da Silva Santos'
WHERE NOME_FUNC = 'Debora Kaynara Patricio da Silva'
--OU 
UPDATE FUNCIONARIO SET NOME_FUNC = 'Debora Kaynara Patricio da Silva Santos'
WHERE COD_FUNC = 

--6) Todos os funcionários receberam 10% de aumento em seus salários. Realize a atualização de seus salários.
UPDATE FUNCIONARIO SET SALARIO = ((SALARIO*0.10)+SALARIO)


--7) Altere o nome da Função Baleiro para Pipoqueiro.
UPDATE FUNCAO SET NOME_FUNCAO = 'Pipoqueiro'
WHERE COD_FUNCAO = 2

--Consultar Somentes os campos Nome e RM da tabela Aluno
 select Nome,RM From TB_ALUNO

SELECT NOME, DT_NASCIMENTO, CIDADE FROM CLIENTE
WHERE CIDADE = 'Barueri' OR CIDADE = 'Osasco'

SELECT NOME, DT_NASCIMENTO, CIDADE FROM CLIENTE
WHERE CIDADE IN ('Barueri','Osasco')

SELECT NOME, DT_NASCIMENTO, CIDADE, BAIRRO FROM CLIENTE
WHERE CIDADE = 'Barueri' AND Bairro = 'Centro'

SELECT * FROM LIVRO
WHERE PRECO < 15

SELECT TITULO, PRECO, ANO, COD_CATEGORIA FROM LIVRO
WHERE COD_CATEGORIA = 3 AND ANO >= 1999

SELECT TITULO, PRECO FROM LIVRO
ORDER BY PRECO DESC

SELECT TITULO, PRECO FROM LIVRO
WHERE PRECO = (SELECT MAX(PRECO) AS MAIOR_PRECO FROM LIVRO)

SELECT MIN(PRECO) AS MENOR_PRECO FROM LIVRO

SELECT SUM(VALOR_TOTAL) AS VALOR_VENDIDO_DIA  FROM PEDIDO
WHERE DATA_PEDIDO = '2019-10-07'

SELECT COUNT(COD_CLIENTE) FROM CLIENTE
WHERE CIDADE = 'Rio de Janeiro'

SELECT AVG(PRECO) AS PRECO_MEDIA FROM LIVRO

SELECT COUNT(COD_CLIENTE) AS QUANTIDADE, CIDADE FROM CLIENTE GROUP BY CIDADE